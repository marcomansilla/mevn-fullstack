(function(t){function e(e){for(var i,n,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)n=s[d],o[n]&&p.push(o[n][0]),o[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],i=!0,s=1;s<r.length;s++){var c=r[s];0!==o[c]&&(i=!1)}i&&(a.splice(e--,1),t=n(n.s=r[0]))}return t}var i={},o={app:0},a=[];function n(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=i,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0fe7":function(t,e,r){"use strict";var i=r("dce0"),o=r.n(i);o.a},1659:function(t,e,r){},"530d":function(t,e,r){"use strict";var i=r("1659"),o=r.n(i);o.a},"54b8":function(t,e,r){"use strict";var i=r("fff3"),o=r.n(i);o.a},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("097d");var i=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h1",[t._v("Biblioteca MEVN - App de prueba")]),r("Listado"),t._m(0)],1)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("footer",[r("p",[t._v("Copyleft 2018")])])}],n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("h1",[t._v("Listado de registros disponibles")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-4"},[r("h3",[t._v("Libros "),r("button",{staticClass:"primary",on:{click:function(e){t.openDialog("crear","libros")}}},[r("i",{staticClass:"fa fa-plus"})])]),r("div",{staticClass:"row"},t._l(t.libros,function(e){return r("div",{staticClass:"card error fluid col-sm-12"},[r("h4",[t._v(t._s(e.titulo))]),r("p",[r("em",[t._v("Autor: ")]),r("strong",[t._v(t._s(t.getAutor(e.autor)))])]),r("p",[r("em",[t._v("Editorial:")]),r("strong",[t._v(t._s(t.getEditorial(e.editorial)))])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-6"},[r("button",{staticClass:"primary btn",on:{click:function(r){t.openDialog("editar","libros",e)}}},[r("i",{staticClass:"fa fa-pencil"}),t._v(" Editar")])]),r("div",{staticClass:"col-sm-6"},[r("button",{staticClass:"danger btn",attrs:{type:"button"},on:{click:function(r){t.removeRecord("libros",e._id)}}},[r("i",{staticClass:"fa fa-trash"}),t._v(" Eliminar")])])])])}),0)]),r("div",{staticClass:"col-sm-4"},[r("h3",[t._v("Autores "),r("button",{staticClass:"primary",on:{click:function(e){t.openDialog("crear","autores")}}},[r("i",{staticClass:"fa fa-plus"})])]),r("div",{staticClass:"row"},t._l(t.autores,function(e){return r("div",{staticClass:"card warning fluid col-sm-12"},[r("h4",[t._v(t._s(e.apellido)+", "+t._s(e.nombre))]),r("p",[r("strong",[t._v("Nacionalidad: ")]),t._v(" "+t._s(e.nacionalidad))]),r("p",[r("strong",[t._v("E-mail: ")]),r("em",[t._v(t._s(e.email))])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-6"},[r("button",{staticClass:"primary btn",on:{click:function(r){t.openDialog("editar","autores",e)}}},[r("i",{staticClass:"fa fa-pencil"}),t._v(" Editar")])]),r("div",{staticClass:"col-sm-6"},[r("button",{staticClass:"danger btn",attrs:{type:"button"},on:{click:function(r){t.removeRecord("autores",e._id)}}},[r("i",{staticClass:"fa fa-trash"}),t._v(" Eliminar")])])])])}),0)]),r("div",{staticClass:"col-sm-4"},[r("h3",[t._v("Editoriales "),r("button",{staticClass:"primary",on:{click:function(e){t.openDialog("crear","editoriales")}}},[r("i",{staticClass:"fa fa-plus"})])]),r("div",{staticClass:"row"},t._l(t.editoriales,function(e){return r("div",{staticClass:"card success fluid col-sm-12"},[r("h4",[t._v(t._s(e.nombre))]),r("p",[r("em",[t._v("Direccion: ")]),r("strong",[t._v(t._s(e.direccion))])]),r("p",[r("em",[t._v("Telefono:")]),r("strong",[t._v(t._s(e.telefono))])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-lg-6"},[r("button",{staticClass:"primary btn",on:{click:function(r){t.openDialog("editar","editoriales",e)}}},[r("i",{staticClass:"fa fa-pencil"}),t._v(" Editar")])]),r("div",{staticClass:"col-sm-6"},[r("button",{staticClass:"danger btn",attrs:{type:"button"},on:{click:function(r){t.removeRecord("editoriales",e._id)}}},[r("i",{staticClass:"fa fa-trash"}),t._v(" Eliminar")])])])])}),0)])]),r("DialogBook",{directives:[{name:"show",rawName:"v-show",value:t.displayDialogLibros,expression:"displayDialogLibros"}],on:{"cancel-action":function(e){t.displayDialogLibros=!1}}}),r("DialogAuthor",{directives:[{name:"show",rawName:"v-show",value:t.displayDialogAutores,expression:"displayDialogAutores"}],on:{"cancel-action":function(e){t.displayDialogAutores=!1}}}),r("DialogEditorial",{directives:[{name:"show",rawName:"v-show",value:t.displayDialogEditoriales,expression:"displayDialogEditoriales"}],on:{"cancel-action":function(e){t.displayDialogEditoriales=!1}}})],1)},s=[],c=(r("ac6a"),r("7514"),r("96cf"),r("3b8d")),l=new i["a"],u=r("bc3a"),d=r.n(u),p={data:function(){return{collections:["autores","editoriales","libros"],registro:{},recordID:null,methodType:"",coleccion:"",libros:[],autores:[],editoriales:[],url:"api/"}},methods:{addOrUpdateRecord:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=[],"post"!=this.methodType){t.next=7;break}return t.next=4,this.newRecord(this.coleccion,this.registro);case 4:e=t.sent,t.next=10;break;case 7:return t.next=9,this.updateRecord({collection:this.coleccion,record:this.registro,id:this.recordID});case 9:e=t.sent;case 10:201==e.status?(l.$emit("".concat(this.coleccion,"Success"),this.coleccion),this.registro={}):console.log(e);case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.$emit("cancel-action"),this.registro={}},getRecords:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=[],t.next=3,d.a.get("".concat(this.url).concat(e)).then(function(t){r=t.data}).catch(function(t){r=t});case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),newRecord:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e,r){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=[],t.next=3,d.a.post("".concat(this.url).concat(e),r).then(function(t){i=t}).catch(function(t){return console.log(t)});case 3:return t.abrupt("return",i);case 4:case"end":return t.stop()}},t,this)}));function e(e,r){return t.apply(this,arguments)}return e}(),deleteRecord:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e,r){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=[],t.next=3,d.a.delete("".concat(this.url).concat(e,"/").concat(r)).then(function(t){return i=t}).catch(function(t){return i=t});case 3:return t.abrupt("return",i);case 4:case"end":return t.stop()}},t,this)}));function e(e,r){return t.apply(this,arguments)}return e}(),updateRecord:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=[],t.next=3,d.a.put("".concat(this.url).concat(e.collection,"/").concat(e.id),e.record).then(function(t){r=t}).catch(function(t){return console.log(t)});case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},created:function(){var t=this;this.collections.forEach(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getRecords(r);case 3:t[r]=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),t.error=e.t0;case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(t){return e.apply(this,arguments)}}())}},f=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"backdrop",on:{click:t.cancel}}),r("dialog",{attrs:{open:""}},[r("form",[r("fieldset",[r("legend",[t._v(t._s(t.titulo))]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12 col-md-6"},[r("label",{attrs:{for:"titulo"}},[t._v("Titulo")]),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.registro.titulo,expression:"registro.titulo",modifiers:{lazy:!0}}],attrs:{type:"text",id:"titulo",placeholder:"Titulo"},domProps:{value:t.registro.titulo},on:{change:function(e){t.$set(t.registro,"titulo",e.target.value)}}})]),r("div",{staticClass:"col-sm-12 col-md-6"},[r("label",{attrs:{for:"autores"}},[t._v("Autor")]),r("select",{directives:[{name:"model",rawName:"v-model.lazy",value:t.registro.autor,expression:"registro.autor",modifiers:{lazy:!0}}],attrs:{id:"autores",name:"autores"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.registro,"autor",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Seleccione el autor")]),t._l(t.autores,function(e,i){return r("option",{domProps:{value:e._id}},[t._v(t._s(e.apellido)+", "+t._s(e.nombre))])})],2)]),r("div",{staticClass:"col-sm-12 col-md-6"},[r("label",{attrs:{for:"isbn"}},[t._v("ISBN")]),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.registro.isbn,expression:"registro.isbn",modifiers:{lazy:!0}}],attrs:{type:"text",id:"isbn",placeholder:"ISBN"},domProps:{value:t.registro.isbn},on:{change:function(e){t.$set(t.registro,"isbn",e.target.value)}}})]),r("div",{staticClass:"col-sm-12 col-md-6"},[r("label",{attrs:{for:"editoriales"}},[t._v("Editorial")]),r("select",{directives:[{name:"model",rawName:"v-model.lazy",value:t.registro.editorial,expression:"registro.editorial",modifiers:{lazy:!0}}],attrs:{id:"editoriales",name:"editoriales",placeholder:"Seleccione la editorial"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.registro,"editorial",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Seleccione la editorial")]),t._l(t.editoriales,function(e,i){return r("option",{domProps:{value:e._id}},[t._v(t._s(e.nombre))])})],2)])]),r("button",{staticClass:"primary",attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.addOrUpdateRecord("libros")}}},[t._v("Enviar")]),r("button",{staticClass:"danger",on:{click:function(e){return e.preventDefault(),t.cancel(e)}}},[t._v("Cancelar")])])])])])},v=[],m={mixins:[p],name:"DialogBook",data:function(){return{titulo:""}},created:function(){var t=this;l.$on("displayDialogLibros",function(e){"crear"===e.task?(t.titulo="Agregar registro",t.methodType="post"):(t.titulo="Editar registro",t.registro=e.registro,t.recordID=e.registro._id,t.methodType="put",delete t.registro._id),t.coleccion=e.coleccion})}},g=m,h=(r("c06f"),r("2877")),b=Object(h["a"])(g,f,v,!1,null,null,null),_=b.exports,y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"backdrop",on:{click:t.cancel}}),r("dialog",{attrs:{open:""}},[r("form",[r("fieldset",[r("legend",[t._v(t._s(t.titulo))]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12 col-md-6"},[r("label",{attrs:{for:"nombre"}},[t._v("Nombre")]),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.registro.nombre,expression:"registro.nombre",modifiers:{lazy:!0}}],attrs:{type:"text",id:"nombre",placeholder:"Nombre"},domProps:{value:t.registro.nombre},on:{change:function(e){t.$set(t.registro,"nombre",e.target.value)}}})]),r("div",{staticClass:"col-sm-12 col-md-6"},[r("label",{attrs:{for:"apellido"}},[t._v("Apellido")]),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.registro.apellido,expression:"registro.apellido",modifiers:{lazy:!0}}],attrs:{type:"text",id:"apellido",placeholder:"Apellido"},domProps:{value:t.registro.apellido},on:{change:function(e){t.$set(t.registro,"apellido",e.target.value)}}})]),r("div",{staticClass:"col-sm-12 col-md-6"},[r("label",{attrs:{for:"nacionalidad"}},[t._v("Nacionalidad")]),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.registro.nacionalidad,expression:"registro.nacionalidad",modifiers:{lazy:!0}}],attrs:{type:"text",id:"isbn",placeholder:"Nacionalidad"},domProps:{value:t.registro.nacionalidad},on:{change:function(e){t.$set(t.registro,"nacionalidad",e.target.value)}}})]),r("div",{staticClass:"col-sm-12 col-md-6"},[r("label",{attrs:{for:"email"}},[t._v("E-mail")]),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.registro.email,expression:"registro.email",modifiers:{lazy:!0}}],attrs:{type:"text",id:"email",placeholder:"E-mail"},domProps:{value:t.registro.email},on:{change:function(e){t.$set(t.registro,"email",e.target.value)}}})])]),r("button",{staticClass:"primary",attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.addOrUpdateRecord("libros")}}},[t._v("Enviar")]),r("button",{staticClass:"danger",on:{click:function(e){return e.preventDefault(),t.cancel(e)}}},[t._v("Cancelar")])])])])])},w=[],C={mixins:[p],name:"DialogAuthor",data:function(){return{titulo:""}},created:function(){var t=this;l.$on("displayDialogAutores",function(e){"crear"===e.task?(t.titulo="Agregar registro",t.methodType="post"):(t.titulo="Editar registro",t.registro=e.registro,t.recordID=e.registro._id,t.methodType="put",delete t.registro._id),t.coleccion=e.coleccion})}},x=C,D=(r("530d"),Object(h["a"])(x,y,w,!1,null,null,null)),k=D.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"backdrop",on:{click:t.cancel}}),r("dialog",{attrs:{open:""}},[r("form",[r("fieldset",[r("legend",[t._v(t._s(t.titulo))]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-12 col-md-6"},[r("label",{attrs:{for:"nombre"}},[t._v("Nombre")]),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.registro.nombre,expression:"registro.nombre",modifiers:{lazy:!0}}],attrs:{type:"text",id:"nombre",placeholder:"Nombre de la editorial"},domProps:{value:t.registro.nombre},on:{change:function(e){t.$set(t.registro,"nombre",e.target.value)}}})]),r("div",{staticClass:"col-sm-12 col-md-6"},[r("label",{attrs:{for:"direccion"}},[t._v("Direccion")]),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.registro.direccion,expression:"registro.direccion",modifiers:{lazy:!0}}],attrs:{type:"text",id:"direccion",placeholder:"Direccion"},domProps:{value:t.registro.direccion},on:{change:function(e){t.$set(t.registro,"direccion",e.target.value)}}})]),r("div",{staticClass:"col-sm-12 col-md-6"},[r("label",{attrs:{for:"telefono"}},[t._v("Telefono")]),r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.registro.telefono,expression:"registro.telefono",modifiers:{lazy:!0}}],attrs:{type:"text",id:"telefono",placeholder:"Telefono"},domProps:{value:t.registro.telefono},on:{change:function(e){t.$set(t.registro,"telefono",e.target.value)}}})])]),r("button",{staticClass:"primary",attrs:{type:"submit"},on:{click:function(e){e.preventDefault(),t.addOrUpdateRecord("editoriales")}}},[t._v("Enviar")]),r("button",{staticClass:"danger",on:{click:function(e){return e.preventDefault(),t.cancel(e)}}},[t._v("Cancelar")])])])])])},E=[],O={mixins:[p],name:"DialogEditorial",data:function(){return{titulo:""}},created:function(){var t=this;l.$on("displayDialogEditoriales",function(e){"crear"===e.task?(t.titulo="Agregar registro",t.methodType="post"):(t.titulo="Editar registro",t.registro=e.registro,t.recordID=e.registro._id,t.methodType="put",delete t.registro._id),t.coleccion=e.coleccion})}},z=O,N=(r("0fe7"),Object(h["a"])(z,R,E,!1,null,null,null)),$=N.exports,j={mixins:[p],name:"listado",components:{DialogBook:_,DialogAuthor:k,DialogEditorial:$},data:function(){return{displayDialogLibros:!1,displayDialogAutores:!1,displayDialogEditoriales:!1,error:null}},methods:{capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},openDialog:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e,r){var i,o=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i=o.length>2&&void 0!==o[2]?o[2]:{},this["displayDialog".concat(this.capitalizeFirstLetter(r))]=!0,t.next=4,l.$emit("displayDialog".concat(this.capitalizeFirstLetter(r)),{task:e,coleccion:r,registro:i});case 4:case"end":return t.stop()}},t,this)}));function e(e,r){return t.apply(this,arguments)}return e}(),getAutor:function(t){var e=this.autores.find(function(e){return e._id===t});return e?"".concat(e.apellido,", ").concat(e.nombre):"No se ha encontrado el autor"},getEditorial:function(t){var e=this.editoriales.find(function(e){return e._id===t});return e?e.nombre:"No se ha encontrado la editorial"},removeRecord:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(e,r){var i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i=confirm("Confirma que desea eliminar el registro?"),!i){t.next=8;break}return t.next=4,this.deleteRecord(e,r);case 4:return t.sent,t.next=7,this.getRecords(e);case 7:this[e]=t.sent;case 8:case"end":return t.stop()}},t,this)}));function e(e,r){return t.apply(this,arguments)}return e}()},created:function(){var t=this;this.collections.forEach(function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l.$on("".concat(r,"Success"),function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t["displayDialog".concat(t.capitalizeFirstLetter(r))]=!1,e.next=3,t.getRecords(i);case 3:t[i]=e.sent;case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())}},A=j,P=(r("54b8"),Object(h["a"])(A,n,s,!1,null,null,null)),T=P.exports,L={components:{Listado:T},data:function(){return{}}},S=L,I=Object(h["a"])(S,o,a,!1,null,null,null),B=I.exports;r("dad5"),r("1f54");i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(B)}}).$mount("#app")},baf5:function(t,e,r){},c06f:function(t,e,r){"use strict";var i=r("baf5"),o=r.n(i);o.a},dce0:function(t,e,r){},fff3:function(t,e,r){}});
//# sourceMappingURL=app.17f4bb17.js.map